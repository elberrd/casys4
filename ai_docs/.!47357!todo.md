# TODO: Add Process Date Field and Split Applicant Fields

## Summary
Add `dateProcess` field and split the single `applicantId` field into `companyApplicantId` and `userApplicantId` with cascading filtering.

---

## Backend Tasks

###  1. Database Schema Updates
- [x] Add `dateProcess` field to individualProcesses table
- [x] Add `companyApplicantId` and `userApplicantId` fields
- [x] Add indexes for new fields (by_companyApplicant, by_userApplicant)
- [x] Mark `applicantId` as deprecated with comments

**Files modified:**
- `convex/schema.ts`

---

###  2. Backend Mutations and Queries
- [x] Update `create` mutation to handle dateProcess
- [x] Update `create` mutation to handle companyApplicantId and userApplicantId
- [x] Update `update` mutation to handle dateProcess
- [x] Update `update` mutation to handle companyApplicantId and userApplicantId
- [x] Update `get` query to enrich companyApplicant and userApplicant data
- [x] Create `listPeopleByCompany` query for cascading filter

**Files modified:**
- `convex/individualProcesses.ts` - Added new fields to create/update mutations and get query
- `convex/people.ts` - Added listPeopleByCompany query with access control

---

###  3. Form Validation Schema
- [x] Add dateProcess to Zod schema
- [x] Add companyApplicantId and userApplicantId to Zod schema
- [x] Mark applicantId as deprecated in comments
- [x] Verify TypeScript type inference works

**Files modified:**
- `lib/validations/individualProcesses.ts`

---

###  4. i18n Translations
- [x] Add English translations (dateProcess, companyApplicant, userApplicant, etc.)
- [x] Add Portuguese translations (Data do Processo, Empresa Requerente, etc.)

**Files modified:**
- `messages/en.json`
- `messages/pt.json`

---

###  5. UI Components
- [x] Create CompanyApplicantSelector component
- [x] Create UserApplicantSelector component with cascading logic

**Files created:**
- `components/individual-processes/company-applicant-selector.tsx`
- `components/individual-processes/user-applicant-selector.tsx`

---

## Frontend Form Tasks

